# To-Do List: API 개발

## 1. 데이터 수집 API
### 1.1. 작품 조회수 및 좋아요 데이터 수집
- [ ] **POST /works/{id}/view**
  - 설명: 특정 작품에 대한 조회수를 증가시키고, 조회 기록을 저장함.
  - 작업:
    - 요청이 들어오면 작품 ID 기반으로 조회수 증가.
    - 조회 기록 저장 (어떤 사용자가 어떤 작품을 조회했는지 기록).
    - 최근 1시간 내 중복 조회 방지.
    - 조회수를 실시간으로 제공.

- [ ] **POST /works/{id}/like**
  - 설명: 특정 작품에 좋아요 추가.
  - 작업:
    - 작품 ID와 소비자 ID를 기반으로 좋아요 데이터 기록.
    - 좋아요 상태를 활성화(`is_active = true`)로 설정.

- [ ] **DELETE /works/{id}/like**
  - 설명: 특정 작품의 좋아요 취소.
  - 작업:
    - 작품 ID와 소비자 ID를 기반으로 좋아요 상태 비활성화(`is_active = false`).

---

## 2. 데이터 조회 API
### 2.1. 작품 데이터 통계 조회
- [ ] **GET /works/{id}/stats**
  - 설명: 특정 작품의 일일, 주간, 월간, 연간 데이터 조회.
  - 작업:
    - 요청된 기간에 해당하는 조회수와 좋아요 데이터를 반환.

### 2.2. 전체 작품 랭킹 조회
- [ ] **GET /ranking**
  - 설명: 모든 작품의 현재 랭킹 점수 조회.
  - 작업:
    - 랭킹 점수 계산: `(좋아요 수 × 2) + (조회수 × 1)`
    - 계산된 순위를 반환.

- [ ] **GET /ranking?date=YYYY-MM-DD**
  - 설명: 특정 날짜 기준 작품 랭킹 조회.
  - 작업:
    - 요청된 날짜의 랭킹 점수를 기준으로 순위 데이터 반환.

---

## 3. 리워드 지급 API
### 3.1. 리워드 지급 요청
- [ ] **POST /rewards/requests**
  - 설명: 관리자가 리워드 지급 요청을 생성.
  - 작업:
    - 특정 날짜를 기준으로 리워드 지급 요청 생성.
    - 요청 당일은 리워드 지급 기준 날짜로 설정 불가.

### 3.2. 리워드 지급 내역 조회
- [ ] **GET /rewards/history**
  - 설명: 모든 리워드 지급 내역 조회.
  - 작업:
    - 지급된 모든 리워드 정보를 반환.

- [ ] **GET /users/{id}/rewards**
  - 설명: 특정 사용자의 리워드 지급 내역 조회.
  - 작업:
    - 사용자 ID 기반으로 지급 내역 반환.
    - 지급 날짜, 지급 이유(랭킹 순위), 지급된 포인트 포함.

### 3.3. 상위 10위 리워드 지급
- [ ] **POST /rewards/execute**
  - 설명: 상위 10위 작품의 작가와 소비자에게 리워드 지급.
  - 작업:
    - 상위 10위 작품의 작가에게 리워드 지급.
      - 동일 작가에게는 리워드가 한 번만 지급.
    - 상위 10위 작품에 기여한 소비자에게 리워드 지급.
      - 각 소비자는 자신이 기여한 작품당 1개의 리워드만 받음.

---

## 4. 관리 및 사용자 API
### 4.1. 사용자 API
- [ ] **GET /users/{id}**
  - 설명: 특정 사용자의 프로필 정보 조회.
  - 작업:
    - 사용자 ID 기반으로 프로필 데이터 반환.

### 4.2. 작가 API
- [ ] **GET /authors/{id}/rewards**
  - 설명: 특정 작가의 리워드 지급 내역 조회.
  - 작업:
    - 작가 ID 기반으로 지급 내역 반환.

---

## 5. 추가 작업
- [ ] **H2 데이터베이스 콘솔 활성화**
  - URL: `/h2-console`
  - 작업: `application.properties`에 H2 콘솔 활성화 설정 추가.

---

## 작업 우선순위
1. **데이터 수집 API**:
  - 조회수, 좋아요 기록 및 상태 관리.
2. **데이터 조회 API**:
  - 작품별 통계 및 랭킹 조회.
3. **리워드 지급 API**:
  - 리워드 지급 요청 및 실행.
4. **관리 및 사용자 API**:
  - 사용자와 작가의 리워드 내역 조회.

---
